---
import SearchBar from '../components/SearchBar.astro';
---
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		{/** Use a dynamic title and description when provided via props, fallback to site */}
		<title>{Astro.props.title || 'RxHive'}</title>
		<meta name="description" content={Astro.props.description || ''} />
		{/** canonical using Astro.site + pathname when available */}
		{Astro.site ? <link rel="canonical" href={`${Astro.site}${Astro.url.pathname}`} /> : null}

			{/** Preconnect and robots */}
			<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
			<meta name="robots" content="index, follow" />

			{/* allow pages to inject head-only fragments like JSON-LD via a named slot */}
			{Astro.slots.head ? <slot name="head" /> : null}

			{/** Open Graph / Twitter */}
			<meta property="og:type" content="website" />
			<meta property="og:title" content={Astro.props.title || 'RxHive'} />
			<meta property="og:description" content={Astro.props.description || ''} />
			{Astro.site ? <meta property="og:url" content={`${Astro.site}${Astro.url.pathname}`} /> : null}
			<meta name="twitter:card" content="summary_large_image" />
			<meta name="twitter:title" content={Astro.props.title || 'RxHive'} />
			<meta name="twitter:description" content={Astro.props.description || ''} />
			<meta name="theme-color" content="#ffffff" />
	</head>

	<body>
		<!-- Keep skip link for accessibility but hide visible text -->
		<a href="#content" class="skip-to-content sr-only">Skip to content</a>

		<header class="site-header">
			<div class="container header-inner">
				<a class="brand" href="/">RxHive</a>
				<div class="header-search">
					<SearchBar />
				</div>
			</div>
		</header>

		<main id="content">
			<div class="container page-grid">
				<section class="content-column">
					<slot />
				</section>
			</div>
		</main>

		<footer class="site-footer">
			<div class="container">
				<div>Â© {new Date().getFullYear()} RxHive</div>
				<nav>
					<a href="/sitemap.xml">Sitemap</a>
				</nav>
			</div>
		</footer>
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
		/* subtle, transparent background gradient similar to home */
		background: radial-gradient(1200px 600px at 10% 10%, rgba(99,102,241,0.06), transparent 10%),
			linear-gradient(180deg, rgba(59,130,246,0.02), rgba(236,72,153,0.02));
	}
</style>

<style>
  /* Explicit heading sizes to avoid relying on UA defaults (prevent H1UserAgentFontSizeInSection warnings) */
  h1 { font-size: 1.875rem; line-height: 1.2; margin: 0 0 0.5rem; }
  h2 { font-size: 1.25rem; line-height: 1.3; margin: 0 0 0.5rem; }
  h3 { font-size: 1rem; line-height: 1.4; margin: 0 0 0.5rem; }
</style>

<style>
	/* Layout container and grid */
	.container { max-width: 1100px; margin: 0 auto; padding: 28px 20px; }
		/* Reserve header height to avoid layout shifts when fonts or nav render */
		:root { --header-height: 64px; }
		.site-header { background: radial-gradient(circle at top left, rgba(37,99,235,0.25), transparent 55%) rgba(15,23,42,0.94); backdrop-filter: blur(12px); color: #fff; min-height: var(--header-height); position: sticky; top: 0; z-index: 100; border-bottom: 1px solid rgba(148,163,184,0.2); padding: 10px 0; }
		.site-header .container { padding-top: 18px; padding-bottom: 18px; }
		.header-inner { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 18px; text-align: center; }
		.brand { font-weight: 700; color: #fff; text-decoration: none; font-size: 1.5rem; letter-spacing: 0.08em; text-transform: uppercase; display: inline-flex; align-items: center; gap: 10px; }
			.brand::after { content: ''; display: block; width: 10px; height: 10px; border-radius: 999px; background: linear-gradient(135deg, #38bdf8, #a855f7); box-shadow: 0 0 10px rgba(56,189,248,0.65); }
			.header-search { display: flex; justify-content: center; width: 100%; }

		.page-grid { display:grid; grid-template-columns: 1fr 300px; gap: 24px; align-items:start; }
	.content-column { padding: 12px 0; }
	.sidebar { }

		/* Image defaults to avoid layout shifts from images loading */
		img { max-width: 100%; height: auto; display: block; }

	/* Simple article/card style for content */
	article { background: #fff; border-radius: 12px; padding: 20px; box-shadow: 0 6px 18px rgba(15,23,42,0.06); }
	.card { background:#fff; padding:12px; border-radius:8px; box-shadow: 0 4px 12px rgba(2,6,23,0.04); margin-bottom:12px; }

	.site-footer { border-top:1px solid #e6eef8; margin-top:36px; padding:18px 0; color:#374151; }
	.site-footer a { color: #374151; text-decoration:none; margin-left:12px; }

	@media (max-width: 900px) {
		.header-search { max-width: 480px; }
		.page-grid { grid-template-columns: 1fr; }
		.sidebar { order: 2; }
	}

	@media (max-width: 640px) {
		.site-header .container { padding-top: 16px; padding-bottom: 16px; }
		.brand { font-size: 1.35rem; letter-spacing: 0.06em; }
	}
</style>

<style>
	/* screen-reader-only utility: visually hidden but available to assistive tech */
	.sr-only {
		position: absolute !important;
		width: 1px !important;
		height: 1px !important;
		padding: 0 !important;
		margin: -1px !important;
		overflow: hidden !important;
		clip: rect(0, 0, 0, 0) !important;
		white-space: nowrap !important;
		border: 0 !important;
	}
</style>
